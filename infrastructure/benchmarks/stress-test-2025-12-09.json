{
  "metadata": {
    "date": "2025-12-09",
    "time": "09:20:33",
    "codebase": "ai-gateway-mcp",
    "memgraph_version": "latest",
    "indexed_files": 0,
    "indexed_nodes": 0
  },
  "results": {
    "basic_queries": {
      "Q1": {
        "status": "pass",
        "response_time_ms": 20864,
        "result_count": 220,
        "notes": "Successfully retrieved 220 item(s) from the graph."
      },
      "Q2": {
        "status": "pass",
        "response_time_ms": 2619,
        "result_count": 130,
        "notes": "Successfully retrieved 130 item(s) from the graph."
      },
      "Q3": {
        "status": "partial",
        "response_time_ms": 3638,
        "result_count": 0,
        "notes": "Successfully retrieved 0 item(s) from the graph."
      },
      "Q4": {
        "status": "pass",
        "response_time_ms": 3905,
        "result_count": 7,
        "notes": "Successfully retrieved 7 item(s) from the graph."
      },
      "Q5": {
        "status": "partial",
        "response_time_ms": 4175,
        "result_count": 0,
        "notes": "Successfully retrieved 0 item(s) from the graph."
      },
      "Q6": {
        "status": "partial",
        "response_time_ms": 3534,
        "result_count": 0,
        "notes": "Successfully retrieved 0 item(s) from the graph."
      }
    },
    "code_retrieval": {
      "C1": {
        "status": "pass",
        "response_time_ms": 13,
        "found": "weavr/tests/test_rust_advanced_types.py",
        "line_count": 1,
        "notes": ""
      },
      "C2": {
        "status": "pass",
        "response_time_ms": 8,
        "found": "weavr/tests/test_rust_advanced_types.py",
        "line_count": 1,
        "notes": ""
      },
      "C3": {
        "status": "pass",
        "response_time_ms": 3,
        "found": "weavr/tests/test_rust_advanced_types.py",
        "line_count": 1,
        "notes": ""
      },
      "C4": {
        "status": "pass",
        "response_time_ms": 4,
        "found": "weavr/tests/test_rust_advanced_types.py",
        "line_count": 1,
        "notes": ""
      },
      "C5": {
        "status": "partial",
        "response_time_ms": 2,
        "found": "",
        "line_count": 0,
        "notes": ""
      }
    },
    "natural_language": {
      "N1": {
        "status": "partial",
        "response_time_ms": 5003,
        "cypher_generated": "MATCH (p:Project)-[:CONTAINS_PACKAGE*]->(m:Module {name: 'benchmark_models'})-[:DEFINES]->(f:Function) \nWHERE f.name = 'main' \nRETURN f.qualified_name AS qualified_name, f.name AS name, labels(f) AS type;",
        "result_quality": "partial",
        "notes": "Successfully retrieved 0 item(s) from the graph."
      },
      "N2": {
        "status": "partial",
        "response_time_ms": 4468,
        "cypher_generated": "MATCH (c:Class) WHERE c.qualified_name STARTS WITH 'APIError' OR ANY(decorator IN c.decorators WHERE decorator CONTAINS 'api_error') RETURN c.qualified_name AS qualified_name, c.name AS name, labels(c) AS type;",
        "result_quality": "partial",
        "notes": "Successfully retrieved 0 item(s) from the graph."
      },
      "N3": {
        "status": "partial",
        "response_time_ms": 7524,
        "cypher_generated": "N/A",
        "result_quality": "partial",
        "notes": "Error executing query: \"<EOF>, ';'\""
      },
      "N4": {
        "status": "pass",
        "response_time_ms": 4255,
        "cypher_generated": "MATCH (caller:Function)-[:CALLS]->(callee:Function)\nRETURN callee.qualified_name AS qualified_name, callee.name AS name, count(DISTINCT caller) AS call_count\nORDER BY call_count DESC\nLIMIT 10;",
        "result_quality": "accurate",
        "notes": "Successfully retrieved 10 item(s) from the graph."
      },
      "N5": {
        "status": "partial",
        "response_time_ms": 3607,
        "cypher_generated": "MATCH (c:Class)\nWHERE toLower(c.qualified_name) ENDS WITH 'exception'\nRETURN c.qualified_name AS qualified_name, c.name AS name, labels(c) AS type;",
        "result_quality": "partial",
        "notes": "Successfully retrieved 0 item(s) from the graph."
      }
    },
    "structural_queries": {
      "S1": {
        "status": "partial",
        "response_time_ms": 8,
        "result_count": 0,
        "performance_target_met": true,
        "notes": "Found 0 callers in 8ms"
      },
      "S2": {
        "status": "pass",
        "response_time_ms": 8,
        "result_count": 3,
        "performance_target_met": true,
        "notes": "Found 3 descendants in 8ms"
      },
      "S3": {
        "status": "partial",
        "response_time_ms": 6,
        "result_count": 0,
        "performance_target_met": true,
        "notes": "Found 0 dependencies in 6ms"
      },
      "S4": {
        "status": "pass",
        "response_time_ms": 4,
        "result_count": 3,
        "performance_target_met": true,
        "notes": "Found 3 implementations in 4ms"
      },
      "S5": {
        "status": "partial",
        "response_time_ms": 4,
        "result_count": 0,
        "performance_target_met": true,
        "notes": "Found 0 exports in 4ms"
      },
      "S6": {
        "status": "pass",
        "response_time_ms": 2,
        "result_count": 15,
        "performance_target_met": true,
        "notes": "Generated call graph with 15 nodes in 2ms"
      },
      "S7": {
        "status": "pass",
        "response_time_ms": 0,
        "result_count": 10,
        "performance_target_met": true,
        "notes": "Executed custom Cypher query, found 10 results in 0ms"
      }
    },
    "edge_cases": {
      "E1": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "",
        "notes": "Empty query"
      },
      "E2": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "",
        "notes": "SQL injection attempt"
      },
      "E3": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "",
        "notes": "Very long query"
      },
      "E4": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "",
        "notes": "Non-English query"
      },
      "E5": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "",
        "notes": "Ambiguous query"
      },
      "E6": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "Function 'ai-gateway-mcp.nonexistent.module.fake_function' not found in code graph.",
        "has_suggestion": true,
        "notes": "Non-existent function query"
      },
      "E7": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "Class 'ai-gateway-mcp.nonexistent.FakeClass' not found in code graph.",
        "notes": "Non-existent class query"
      },
      "E8": {
        "status": "pass",
        "handled_gracefully": true,
        "truncated": false,
        "row_count": 0,
        "total_count": 0,
        "notes": "Truncation test - truncated: False"
      },
      "E9": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "max_depth must be between 1 and 5 (got 999)",
        "notes": "Invalid max_depth validation"
      },
      "E10": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "Destructive operation 'DELETE' is not allowed in expert mode",
        "notes": "Destructive query prevention"
      },
      "E11": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "SET operations are not allowed in expert mode (read-only)",
        "notes": "SET operation prevention"
      },
      "E12": {
        "status": "pass",
        "handled_gracefully": true,
        "has_circular_detection": true,
        "circular_deps": [],
        "notes": "Circular dependency detection feature"
      },
      "E13": {
        "status": "pass",
        "handled_gracefully": true,
        "has_results": true,
        "result_count": 3,
        "notes": "Empty result with valid node"
      },
      "E14": {
        "status": "partial",
        "handled_gracefully": true,
        "notes": "Invalid dependency type parameter test"
      },
      "E15": {
        "status": "pass",
        "handled_gracefully": true,
        "error_message": "Query cannot be empty",
        "notes": "Empty Cypher query validation"
      }
    },
    "performance": {
      "P1": {
        "avg_ms": 2417,
        "max_ms": 2562,
        "min_ms": 2339,
        "target_met": true
      },
      "P2": {
        "avg_ms": 4974,
        "max_ms": 5285,
        "min_ms": 4663,
        "target_met": true
      },
      "P3": {
        "avg_ms": 6,
        "max_ms": 11,
        "min_ms": 2,
        "target_met": true
      },
      "P4": {
        "avg_ms": 3461,
        "max_ms": 10383,
        "min_ms": 3461,
        "target_met": true
      }
    },
    "mcp_integration": {
      "MCP1": {
        "status": "pass",
        "total_tools": 14,
        "structural_tools_found": 7,
        "structural_tools_expected": 7,
        "missing_tools": [],
        "notes": "Found 7/7 structural tools"
      },
      "MCP2": {
        "status": "pass",
        "total_schemas": 14,
        "valid_schemas": 14,
        "invalid_schemas": [],
        "notes": "14/14 schemas valid"
      },
      "MCP3": {
        "status": "pass",
        "total_tools": 14,
        "callable_handlers": 14,
        "non_callable": [],
        "notes": "14/14 handlers callable"
      },
      "MCP4": {
        "status": "pass",
        "returns_json_flag": true,
        "actual_type": "dict",
        "type_matches": true,
        "notes": "JSON tool returns dict"
      },
      "MCP5": {
        "status": "partial",
        "total_tools": 14,
        "adequate_descriptions": 13,
        "short_descriptions": [
          "list_directory"
        ],
        "notes": "13/14 tools have adequate descriptions"
      }
    },
    "project_isolation": {
      "ISO1": {
        "status": "partial",
        "has_results": false,
        "result_count": 0,
        "notes": "Project isolation verified through query"
      },
      "ISO2": {
        "status": "pass",
        "response_time_ms": 3,
        "performance_acceptable": true,
        "notes": "Project filter query completed in 3ms"
      },
      "ISO3": {
        "status": "pass",
        "project_count": 2,
        "projects": [
          "code-graph-rag",
          "ai-gateway-mcp"
        ],
        "has_current_project": true,
        "notes": "Found 2 project(s) in graph, current project present: True"
      }
    },
    "error_handling": {
      "ERR1": {
        "status": "skipped",
        "notes": "Connection failure simulation requires special setup"
      },
      "ERR2": {
        "status": "pass",
        "error_handled": true,
        "notes": "Malformed Cypher syntax"
      },
      "ERR3": {
        "status": "pass",
        "error_handled": true,
        "notes": "Special characters handled gracefully"
      },
      "ERR4": {
        "status": "pass",
        "error_handled": true,
        "error_message": "'NoneType' object has no attribute 'split'",
        "notes": "None parameter correctly rejected"
      },
      "ERR5": {
        "status": "pass",
        "unicode_handled": true,
        "notes": "Unicode query handled"
      }
    },
    "concurrent_operations": {
      "CONC1": {
        "status": "pass",
        "successful_queries": 3,
        "total_queries": 3,
        "response_time_ms": 17,
        "notes": "3/3 concurrent queries succeeded"
      },
      "CONC2": {
        "status": "pass",
        "successful_queries": 3,
        "total_queries": 3,
        "response_time_ms": 14,
        "notes": "Mixed tool concurrent execution: 3/3"
      },
      "CONC3": {
        "status": "pass",
        "successful_queries": 10,
        "total_queries": 10,
        "response_time_ms": 21,
        "avg_time_per_query": 2,
        "notes": "High load test: 10/10 succeeded in 21ms"
      },
      "CONC4": {
        "status": "pass",
        "successful_queries": 5,
        "total_queries": 5,
        "response_time_ms": 28,
        "notes": "Variable depth concurrent queries: 5/5"
      }
    }
  },
  "summary": {
    "total_tests": 59,
    "passed": 44,
    "partial": 14,
    "failed": 0,
    "skipped": 1,
    "pass_rate": "74.6%",
    "test_categories": {
      "basic_queries": 6,
      "code_retrieval": 5,
      "natural_language": 5,
      "structural_queries": 7,
      "edge_cases": 15,
      "performance": 4,
      "mcp_integration": 5,
      "project_isolation": 3,
      "error_handling": 5,
      "concurrent_operations": 4
    },
    "structural_query_performance": "7/7 tools met <50ms target",
    "mcp_integration_status": "4/5 tests passed",
    "edge_case_coverage": "14/15 handled gracefully",
    "concurrent_reliability": "4/4 tests passed",
    "strengths": [
      "Structural query tools: 7/7 met performance targets",
      "MCP integration: 4/5 tests passed",
      "Edge case handling: 14/15 handled gracefully",
      "Concurrent operations: 4/4 tests passed",
      "Graph indexing functional",
      "Code retrieval operational",
      "Memgraph connectivity stable"
    ],
    "weaknesses": [
      "No significant weaknesses detected"
    ],
    "recommendations": [
      "All 7 structural query tools tested and validated",
      "MCP integration: 5 tests verify tool registration and schemas",
      "Edge cases: 15 scenarios tested for robustness",
      "Concurrent operations: 4 tests verify thread safety",
      "Investigate 14 partial results for potential issues",
      "Continue monitoring performance on larger codebases"
    ]
  }
}